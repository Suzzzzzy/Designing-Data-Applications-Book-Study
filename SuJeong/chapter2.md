# 2장 데이터 모델과 질의 언어

## 1. 트리 구조 : 다대다 관계를 표현하기에는 적절하지 않음
## 2. 관계형 모델

- 비관계형 데이터 모델 (noSQL)
- 각기 목적에 맞는 다양한 시스템을 보유해야 한다.
- 네트워크 모델, 계층 모델 → 관계형 모델

## 3.  No SQL

- 대규모 데이터셋이나 매우 높은 쓰기 처리량 달성을 관계형 DB 보다 쉽게 할 수 있는 확장성
- 관계형 모델에서 지원하지 않는 특수 질의 동작
- 관계형 스키마의 제한에 대한 불만과 더욱 동적이고 표현력이 풍부한 데이터 모델 필요

#JSON 표현은 다중 테이블(multi-table) 스키마보다 더 나은 지역성(locality) 을 갖는다.

## 4. 네트워크 모델

- 계층 모델의 트리 구조에서 모든 레코드는 정확하게 하나의 부모가 있다.
- 네트워크 모델에서 레코드는 다중 부모가 있을 수 있다. .
- 네트워크에서 레코드에 접근하는 유일한 방법은 최상위 레코드(root record)에서부터 연속된 연결 경로를 따르는 방법 ( 접근 경로 )

## 5. 관계형 모델

- 중첩 구조와 데이터를 보고 싶을 때 따라가야 할 복잡한 접근 경로가 없다.
- 질의 최적화기(query optimizer)는 질의의 어느 부분을 어떤 순서로 실행할지를 결정하고 사용할 색인을 자동으로 결정 (개발자가 생성 x)

## 6. 문서 데이터 모델

- 별도 테이블이 아닌 상위 레코드 내에 중첩된 레코드(일대다 관계)를 저장
- 스키마 유연성, 지역성에 기인한 더 나은 성능
- 문서 내 중첩 항목을 바로 참조할 수 없음 (너무 깊은 중첩일때 어려움)
- 상호 연결이 많을때는 어려움
- 암묵적인 스키마가 존재함 : 쓰기 스키마 (schema-on-write : 관계형 데이터베이스의 전통적인 접근 방식으로 스키마는 명시적이고 데이터 베이스는 쓰여진 모든 데이터가 스키마를 따르고 있음을 보장) 가 아닌 읽기 스키마 (schema-on-read : 데이터 구조는 암묵적이고 데이터를 읽을 때만 해석된다.)
- 일대다 관계거나 레코드 간 관계가 없다면 문서 모델이 적합
- 데이터가 문서 자체에 포함돼 있으면서 하나의 문서와 다른 문서 간 관계가 거의 없는 사용 사례를 대상

## 7. 데이터 지역성

- 저장소 지역성 (storage locality) : 애플리케이션이 자주 전체 문서에 접근시 성능이점을 가질 수 있음
  - 데이터가 다중 테이블로 나눠져있으면 전체를 검색하기 위해 다중 색인 검색이 필요하며 이 경우 더 많은 디스크 탐색 시간이 필요함
- 구글의 스패너 데이터베이스는 부모 테이블 내에 (중첩되게) 테이블의 로우를 교차 배치되게끔 선언하는 스키마를 허용해 관계형 데이터 모델에서 지역성 특성을 동일하게 제공 → 오라클은 다중 테이블 색인 클러스터 테이블 기능을 사용해 동일한 특성 제공

## 8. 그래프형 데이터 모델

- 상호연결이 많을 때도 자연스러움
- 정점(vertex : 노드나 엔티티)과 간선(edge: 관계나 호)으로 이용
- 소셜 그래프, 웹 그래프, 도로나 철도 네트워크
- 문서 데이터베이스와는 정반대로 모든 것이 잠재적으로 관련 있다는 사용 사례를 대상으로 한다.

다대일, 다대다 관계 를 표현할 때 관계형 모델에서는 외래키로 연결, 문서모델에서는 문서 참조(document reference)로 연결

## 9. 질의

- 선언형 질의언어 (sql)
  - 병렬 실행에 적합
  - 선언형 언어는 결과를 결정하기 위한 알고리즘을 지정하는 게 아니라 결과의 패턴만 지정하기 때문에 병렬 실행으로 더 빨라질 가능성이 큼
- 명령형 코드 (ims, 코다실)

#웹 브라우저에서 선언형 CSS 스타일을 사용하는 편이 자바스크립트에서 명령형으로 스타일을 다루기보다 훨씬 낫다. 데이터베이스에서는 SQL 같은 선언형 질의 언어가 명령형 질의 API 보다 좋다.

## 10.  맵리듀스 질의
- MapReduce : 많은 컴퓨터에서 대량의 데이터를 처리하기 위한 프로그래밍 모델
- 몽고 DB, 카우치 DB 등이 제한된 형태의 맵리듀스 지원
- 여러 함수형 프로그래밍 언어에 있는 map(collect) 과 reduce(fold, inject) 함수를 기반으로 한다.